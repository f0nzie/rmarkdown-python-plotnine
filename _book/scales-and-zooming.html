<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Ch. 5 Scales and Zooming | Data Visualization with PlotNine</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Ch. 5 Scales and Zooming | Data Visualization with PlotNine" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Ch. 5 Scales and Zooming | Data Visualization with PlotNine" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Jeroen Janssens" />


<meta name="date" content="2020-10-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="transformations.html"/>
<link rel="next" href="graphics-for-communication.html"/>
<script src="libs/header-attrs-2.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Visualization with PlotNine</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface</a></li>
<li class="chapter" data-level="2" data-path="data-visualisation-with-plotnine.html"><a href="data-visualisation-with-plotnine.html"><i class="fa fa-check"></i><b>2</b> Data visualisation with <code>plotnine</code></a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-visualisation-with-plotnine.html"><a href="data-visualisation-with-plotnine.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="data-visualisation-with-plotnine.html"><a href="data-visualisation-with-plotnine.html#prerequisites"><i class="fa fa-check"></i><b>2.1.1</b> Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-visualisation-with-plotnine.html"><a href="data-visualisation-with-plotnine.html#first-steps"><i class="fa fa-check"></i><b>2.2</b> First steps</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="data-visualisation-with-plotnine.html"><a href="data-visualisation-with-plotnine.html#the-mpg-dataframe"><i class="fa fa-check"></i><b>2.2.1</b> The <code>mpg</code> DataFrame</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-visualisation-with-plotnine.html"><a href="data-visualisation-with-plotnine.html#creating-a-ggplot"><i class="fa fa-check"></i><b>2.2.2</b> Creating a ggplot</a></li>
<li class="chapter" data-level="2.2.3" data-path="data-visualisation-with-plotnine.html"><a href="data-visualisation-with-plotnine.html#a-graphing-template"><i class="fa fa-check"></i><b>2.2.3</b> A graphing template</a></li>
<li class="chapter" data-level="2.2.4" data-path="data-visualisation-with-plotnine.html"><a href="data-visualisation-with-plotnine.html#exercises"><i class="fa fa-check"></i><b>2.2.4</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="aesthetics-and-geometry.html"><a href="aesthetics-and-geometry.html"><i class="fa fa-check"></i><b>3</b> Aesthetics and Geometry</a>
<ul>
<li class="chapter" data-level="3.1" data-path="aesthetics-and-geometry.html"><a href="aesthetics-and-geometry.html#aesthetic-mappings"><i class="fa fa-check"></i><b>3.1</b> Aesthetic mappings</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="aesthetics-and-geometry.html"><a href="aesthetics-and-geometry.html#exercises-1"><i class="fa fa-check"></i><b>3.1.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="aesthetics-and-geometry.html"><a href="aesthetics-and-geometry.html#common-problems"><i class="fa fa-check"></i><b>3.2</b> Common problems</a></li>
<li class="chapter" data-level="3.3" data-path="aesthetics-and-geometry.html"><a href="aesthetics-and-geometry.html#facets"><i class="fa fa-check"></i><b>3.3</b> Facets</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="aesthetics-and-geometry.html"><a href="aesthetics-and-geometry.html#exercises-2"><i class="fa fa-check"></i><b>3.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="aesthetics-and-geometry.html"><a href="aesthetics-and-geometry.html#geometric-objects"><i class="fa fa-check"></i><b>3.4</b> Geometric objects</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="aesthetics-and-geometry.html"><a href="aesthetics-and-geometry.html#exercises-3"><i class="fa fa-check"></i><b>3.4.1</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="transformations.html"><a href="transformations.html"><i class="fa fa-check"></i><b>4</b> Transformations</a>
<ul>
<li class="chapter" data-level="4.1" data-path="transformations.html"><a href="transformations.html#statistical-transformations"><i class="fa fa-check"></i><b>4.1</b> Statistical transformations</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="transformations.html"><a href="transformations.html#exercises-4"><i class="fa fa-check"></i><b>4.1.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="transformations.html"><a href="transformations.html#position-adjustments"><i class="fa fa-check"></i><b>4.2</b> Position adjustments</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="transformations.html"><a href="transformations.html#exercises-5"><i class="fa fa-check"></i><b>4.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="transformations.html"><a href="transformations.html#coordinate-systems"><i class="fa fa-check"></i><b>4.3</b> Coordinate systems</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="transformations.html"><a href="transformations.html#exercises-6"><i class="fa fa-check"></i><b>4.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="transformations.html"><a href="transformations.html#the-layered-grammar-of-graphics"><i class="fa fa-check"></i><b>4.4</b> The layered grammar of graphics</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="scales-and-zooming.html"><a href="scales-and-zooming.html"><i class="fa fa-check"></i><b>5</b> Scales and Zooming</a>
<ul>
<li class="chapter" data-level="5.1" data-path="scales-and-zooming.html"><a href="scales-and-zooming.html#scales"><i class="fa fa-check"></i><b>5.1</b> Scales</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="scales-and-zooming.html"><a href="scales-and-zooming.html#axis-ticks-and-legend-keys"><i class="fa fa-check"></i><b>5.1.1</b> Axis ticks and legend keys</a></li>
<li class="chapter" data-level="5.1.2" data-path="scales-and-zooming.html"><a href="scales-and-zooming.html#legend-layout"><i class="fa fa-check"></i><b>5.1.2</b> Legend layout</a></li>
<li class="chapter" data-level="5.1.3" data-path="scales-and-zooming.html"><a href="scales-and-zooming.html#replacing-a-scale"><i class="fa fa-check"></i><b>5.1.3</b> Replacing a scale</a></li>
<li class="chapter" data-level="5.1.4" data-path="scales-and-zooming.html"><a href="scales-and-zooming.html#exercises-7"><i class="fa fa-check"></i><b>5.1.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="scales-and-zooming.html"><a href="scales-and-zooming.html#zooming"><i class="fa fa-check"></i><b>5.2</b> Zooming</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html"><i class="fa fa-check"></i><b>6</b> Graphics for communication</a>
<ul>
<li class="chapter" data-level="6.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#introduction-1"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#labels"><i class="fa fa-check"></i><b>6.2</b> Labels</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercises-8"><i class="fa fa-check"></i><b>6.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#annotations"><i class="fa fa-check"></i><b>6.3</b> Annotations</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercises-9"><i class="fa fa-check"></i><b>6.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#themes"><i class="fa fa-check"></i><b>6.4</b> Themes</a></li>
<li class="chapter" data-level="6.5" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#saving-your-plots"><i class="fa fa-check"></i><b>6.5</b> Saving your plots</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#figure-sizing"><i class="fa fa-check"></i><b>6.5.1</b> Figure sizing</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://datascienceworkshops.com/blog/plotnine-grammar-of-graphics-for-python/" target="blank">Original article by Jeroen Janssens</a></li>
<li><a href="https://github.com/f0nzie/rmarkdown-python-plotnine/" target="blank">This book repo by Alfonso R. Reyes</a></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Visualization with PlotNine</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="scales-and-zooming" class="section level1" number="5">
<h1><span class="header-section-number">Ch. 5</span> Scales and Zooming</h1>
<div id="scales" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Scales</h2>
<p>The third way you can make your plot better for communication is to adjust the scales. Scales control the mapping from data values to things that you can perceive. Normally, plotnine automatically adds scales for you. For example, when you type:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb69-1"><a href="scales-and-zooming.html#cb69-1" aria-hidden="true" tabindex="-1"></a>ggplot(mpg, aes(<span class="st">&quot;displ&quot;</span>, <span class="st">&quot;hwy&quot;</span>)) <span class="op">+\</span></span>
<span id="cb69-2"><a href="scales-and-zooming.html#cb69-2" aria-hidden="true" tabindex="-1"></a>geom_point(aes(colour<span class="op">=</span><span class="st">&quot;class&quot;</span>))</span></code></pre></div>
<p>plotnine automatically adds default scales behind the scenes:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb70-1"><a href="scales-and-zooming.html#cb70-1" aria-hidden="true" tabindex="-1"></a>ggplot(mpg, aes(<span class="st">&quot;displ&quot;</span>, <span class="st">&quot;hwy&quot;</span>)) <span class="op">+\</span></span>
<span id="cb70-2"><a href="scales-and-zooming.html#cb70-2" aria-hidden="true" tabindex="-1"></a>geom_point(aes(colour<span class="op">=</span><span class="st">&quot;class&quot;</span>)) <span class="op">+\</span></span>
<span id="cb70-3"><a href="scales-and-zooming.html#cb70-3" aria-hidden="true" tabindex="-1"></a>scale_x_continuous() <span class="op">+\</span></span>
<span id="cb70-4"><a href="scales-and-zooming.html#cb70-4" aria-hidden="true" tabindex="-1"></a>scale_y_continuous() <span class="op">+\</span></span>
<span id="cb70-5"><a href="scales-and-zooming.html#cb70-5" aria-hidden="true" tabindex="-1"></a>scale_colour_discrete()</span></code></pre></div>
<p>Note the naming scheme for scales: <code>scale_</code> followed by the name of the aesthetic, then <code>_</code>, then the name of the scale. The default scales are named according to the type of variable they align with: continuous, discrete, datetime, or date. There are lots of non-default scales which you’ll learn about below.</p>
<p>The default scales have been carefully chosen to do a good job for a wide range of inputs. Nevertheless, you might want to override the defaults for two reasons:</p>
<ul>
<li><p>You might want to tweak some of the parameters of the default scale.
This allows you to do things like change the breaks on the axes, or the
key labels on the legend.</p></li>
<li><p>You might want to replace the scale altogether, and use a completely
different algorithm. Often you can do better than the default because
you know more about the data.</p></li>
</ul>
<div id="axis-ticks-and-legend-keys" class="section level3" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> Axis ticks and legend keys</h3>
<p>There are two primary arguments that affect the appearance of the ticks on the axes and the keys on the legend: <code>breaks</code> and <code>labels</code>. Breaks controls the position of the ticks, or the values associated with the keys. Labels controls the text label associated with each tick/key. The most common use of <code>breaks</code> is to override the default choice:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb71-1"><a href="scales-and-zooming.html#cb71-1" aria-hidden="true" tabindex="-1"></a>ggplot(mpg, aes(<span class="st">&quot;displ&quot;</span>, <span class="st">&quot;hwy&quot;</span>)) <span class="op">+\</span></span>
<span id="cb71-2"><a href="scales-and-zooming.html#cb71-2" aria-hidden="true" tabindex="-1"></a>geom_point() <span class="op">+\</span></span>
<span id="cb71-3"><a href="scales-and-zooming.html#cb71-3" aria-hidden="true" tabindex="-1"></a>scale_y_continuous(breaks<span class="op">=</span><span class="bu">range</span>(<span class="dv">15</span>, <span class="dv">45</span>, <span class="dv">5</span>))</span></code></pre></div>
<p><img src="plotnine_files/figure-html/unnamed-chunk-77-1.png" width="541" class="md:w-3/4 lg:w-2/3" style="display: block; margin: auto;" /></p>
<p>You can use <code>labels</code> in the same way (a list of strings the same length as <code>breaks</code>), but you can also suppress the labels altogether by passing a list of empty strings. This is useful for maps, or for publishing plots where you can’t share the absolute numbers. Note that the list of labels needs to be of the same length as the list of values, so a helper function like <code>no_labels</code> is convenient<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a>:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb72-1"><a href="scales-and-zooming.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> no_labels(values):</span>
<span id="cb72-2"><a href="scales-and-zooming.html#cb72-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [<span class="st">&quot;&quot;</span>] <span class="op">*</span> <span class="bu">len</span>(values)</span>
<span id="cb72-3"><a href="scales-and-zooming.html#cb72-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-4"><a href="scales-and-zooming.html#cb72-4" aria-hidden="true" tabindex="-1"></a>ggplot(mpg, aes(<span class="st">&quot;displ&quot;</span>, <span class="st">&quot;hwy&quot;</span>)) <span class="op">+\</span></span>
<span id="cb72-5"><a href="scales-and-zooming.html#cb72-5" aria-hidden="true" tabindex="-1"></a>geom_point() <span class="op">+\</span></span>
<span id="cb72-6"><a href="scales-and-zooming.html#cb72-6" aria-hidden="true" tabindex="-1"></a>scale_x_continuous(labels<span class="op">=</span>no_labels) <span class="op">+\</span></span>
<span id="cb72-7"><a href="scales-and-zooming.html#cb72-7" aria-hidden="true" tabindex="-1"></a>scale_y_continuous(labels<span class="op">=</span>no_labels)</span></code></pre></div>
<p><img src="plotnine_files/figure-html/unnamed-chunk-78-1.png" width="524" class="md:w-3/4 lg:w-2/3" style="display: block; margin: auto;" /></p>
<p>You can also use <code>breaks</code> and <code>labels</code> to control the appearance of legends. Collectively axes and legends are called <strong>guides</strong>. Axes are used for x and y aesthetics; legends are used for everything else.</p>
<p>Another use of <code>breaks</code> is when you have relatively few data points and want to highlight exactly where the observations occur. For example, take this plot that shows when each US president started and ended their term.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb73-1"><a href="scales-and-zooming.html#cb73-1" aria-hidden="true" tabindex="-1"></a>presidential[<span class="st">&quot;id&quot;</span>] <span class="op">=</span> <span class="dv">34</span> <span class="op">+</span> presidential.index</span>
<span id="cb73-2"><a href="scales-and-zooming.html#cb73-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-3"><a href="scales-and-zooming.html#cb73-3" aria-hidden="true" tabindex="-1"></a>ggplot(presidential, aes(<span class="st">&quot;start&quot;</span>, <span class="st">&quot;id&quot;</span>)) <span class="op">+\</span></span>
<span id="cb73-4"><a href="scales-and-zooming.html#cb73-4" aria-hidden="true" tabindex="-1"></a>geom_point() <span class="op">+\</span></span>
<span id="cb73-5"><a href="scales-and-zooming.html#cb73-5" aria-hidden="true" tabindex="-1"></a>geom_segment(aes(xend<span class="op">=</span><span class="st">&quot;end&quot;</span>, yend<span class="op">=</span><span class="st">&quot;id&quot;</span>)) <span class="op">+\</span></span>
<span id="cb73-6"><a href="scales-and-zooming.html#cb73-6" aria-hidden="true" tabindex="-1"></a>scale_x_date(name<span class="op">=</span><span class="st">&quot;&quot;</span>, breaks<span class="op">=</span>presidential.start, date_labels<span class="op">=</span><span class="st">&quot;&#39;%y&quot;</span>)</span></code></pre></div>
<p><img src="plotnine_files/figure-html/unnamed-chunk-79-1.png" width="541" class="md:w-3/4 lg:w-2/3" style="display: block; margin: auto;" /></p>
<p>Note that the specification of breaks and labels for date and datetime scales is a little different:</p>
<ul>
<li><p><code>date_labels</code> takes a format specification, in the same form as <code>time.strptime()</code>.</p></li>
<li><p><code>date_breaks</code> (not shown here), takes a string like “2 days” or “1 month.”</p></li>
</ul>
</div>
<div id="legend-layout" class="section level3" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> Legend layout</h3>
<p>You will most often use <code>breaks</code> and <code>labels</code> to tweak the axes. While they both also work for legends, there are a few other techniques you are more likely to use.</p>
<p>To control the overall position of the legend, you need to use a <code>theme()</code> setting. We’ll come back to themes at the end of the chapter, but in brief, they control the non-data parts of the plot. The theme setting <code>legend_position</code> controls where the legend is drawn. Unfortunately, in order to position the legend correctly on the left or the bottom, we have to be a bit more explicit. Just using “left” and “bottom” may cause the legend to overlap the axis labels. Your milage may vary.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb74-1"><a href="scales-and-zooming.html#cb74-1" aria-hidden="true" tabindex="-1"></a>base <span class="op">=</span> ggplot(mpg, aes(<span class="st">&quot;displ&quot;</span>, <span class="st">&quot;hwy&quot;</span>)) <span class="op">+\</span></span>
<span id="cb74-2"><a href="scales-and-zooming.html#cb74-2" aria-hidden="true" tabindex="-1"></a>geom_point(aes(colour<span class="op">=</span><span class="st">&quot;class&quot;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb75"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb75-1"><a href="scales-and-zooming.html#cb75-1" aria-hidden="true" tabindex="-1"></a>base <span class="op">+</span> theme(legend_position<span class="op">=</span><span class="st">&quot;right&quot;</span>) <span class="co"># the default</span></span></code></pre></div>
<p><img src="plotnine_files/figure-html/unnamed-chunk-81-1.png" width="689" class="md:w-3/4 lg:w-2/3" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb76"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb76-1"><a href="scales-and-zooming.html#cb76-1" aria-hidden="true" tabindex="-1"></a>base <span class="op">+</span> theme(subplots_adjust<span class="op">=</span>{<span class="st">&#39;left&#39;</span>: <span class="fl">0.2</span>}) <span class="op">+</span> theme(legend_position<span class="op">=</span>(<span class="dv">0</span>, <span class="fl">0.5</span>))</span></code></pre></div>
<p><img src="plotnine_files/figure-html/unnamed-chunk-82-1.png" width="641" class="md:w-3/4 lg:w-2/3" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb77"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb77-1"><a href="scales-and-zooming.html#cb77-1" aria-hidden="true" tabindex="-1"></a>base <span class="op">+</span> theme(legend_position<span class="op">=</span><span class="st">&quot;top&quot;</span>)</span></code></pre></div>
<p><img src="plotnine_files/figure-html/unnamed-chunk-83-1.png" width="541" class="md:w-3/4 lg:w-2/3" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb78"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb78-1"><a href="scales-and-zooming.html#cb78-1" aria-hidden="true" tabindex="-1"></a>base <span class="op">+</span> theme(subplots_adjust<span class="op">=</span>{<span class="st">&#39;bottom&#39;</span>: <span class="fl">0.2</span>}, legend_position<span class="op">=</span>(<span class="fl">.5</span>, <span class="dv">0</span>), legend_direction<span class="op">=</span><span class="st">&#39;horizontal&#39;</span>)</span></code></pre></div>
<p><img src="plotnine_files/figure-html/unnamed-chunk-84-1.png" width="541" class="md:w-3/4 lg:w-2/3" style="display: block; margin: auto;" /></p>
<p>You can also use <code>legend_position="none"</code> to suppress the display of the legend altogether.</p>
<p>To control the display of individual legends, use <code>guides()</code> along with <code>guide_legend()</code> or <code>guide_colourbar()</code>. The following example shows two important settings: controlling the number of rows the legend uses with <code>nrow</code>, and overriding one of the aesthetics to make the points bigger. This is particularly useful if you have used a low <code>alpha</code> to display many points on a plot.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb79-1"><a href="scales-and-zooming.html#cb79-1" aria-hidden="true" tabindex="-1"></a>ggplot(mpg, aes(<span class="st">&quot;displ&quot;</span>, <span class="st">&quot;hwy&quot;</span>)) <span class="op">+\</span></span>
<span id="cb79-2"><a href="scales-and-zooming.html#cb79-2" aria-hidden="true" tabindex="-1"></a>geom_point(aes(colour<span class="op">=</span><span class="st">&quot;class&quot;</span>)) <span class="op">+\</span></span>
<span id="cb79-3"><a href="scales-and-zooming.html#cb79-3" aria-hidden="true" tabindex="-1"></a>geom_smooth(se<span class="op">=</span><span class="va">False</span>) <span class="op">+\</span></span>
<span id="cb79-4"><a href="scales-and-zooming.html#cb79-4" aria-hidden="true" tabindex="-1"></a>theme(legend_position<span class="op">=</span><span class="st">&quot;bottom&quot;</span>) <span class="op">+\</span></span>
<span id="cb79-5"><a href="scales-and-zooming.html#cb79-5" aria-hidden="true" tabindex="-1"></a>guides(colour<span class="op">=</span>guide_legend(nrow<span class="op">=</span><span class="dv">1</span>, override_aes<span class="op">=</span>{<span class="st">&quot;size&quot;</span>: <span class="dv">4</span>}))</span></code></pre></div>
<p><img src="plotnine_files/figure-html/unnamed-chunk-85-1.png" width="630" class="md:w-3/4 lg:w-2/3" style="display: block; margin: auto;" /></p>
</div>
<div id="replacing-a-scale" class="section level3" number="5.1.3">
<h3><span class="header-section-number">5.1.3</span> Replacing a scale</h3>
<p>Instead of just tweaking the details a little, you can instead replace the scale altogether. There are two types of scales you’re mostly likely to want to switch out: continuous position scales and colour scales. Fortunately, the same principles apply to all the other aesthetics, so once you’ve mastered position and colour, you’ll be able to quickly pick up other scale replacements.</p>
<p>It’s very useful to plot transformations of your variable. For example, with the <code>diamonds</code> DataFrame, it’s easier to see the precise relationship between <code>carat</code> and <code>price</code> if we log transform them:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb80-1"><a href="scales-and-zooming.html#cb80-1" aria-hidden="true" tabindex="-1"></a>ggplot(diamonds, aes(<span class="st">&quot;carat&quot;</span>, <span class="st">&quot;price&quot;</span>)) <span class="op">+\</span></span>
<span id="cb80-2"><a href="scales-and-zooming.html#cb80-2" aria-hidden="true" tabindex="-1"></a>geom_bin2d()</span></code></pre></div>
<p><img src="plotnine_files/figure-html/unnamed-chunk-86-1.png" width="675" class="md:w-3/4 lg:w-2/3" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb81"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb81-1"><a href="scales-and-zooming.html#cb81-1" aria-hidden="true" tabindex="-1"></a>ggplot(diamonds, aes(<span class="st">&quot;np.log10(carat)&quot;</span>, <span class="st">&quot;np.log10(price)&quot;</span>)) <span class="op">+\</span></span>
<span id="cb81-2"><a href="scales-and-zooming.html#cb81-2" aria-hidden="true" tabindex="-1"></a>geom_bin2d()</span></code></pre></div>
<p><img src="plotnine_files/figure-html/unnamed-chunk-87-1.png" width="655" class="md:w-3/4 lg:w-2/3" style="display: block; margin: auto;" /></p>
<p>However, the disadvantage of this transformation is that the axes are now labelled with the transformed values, making it hard to interpret the plot. Instead of doing the transformation in the aesthetic mapping, we can instead do it with the scale. This is visually identical, except the axes are labelled on the original data scale.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb82-1"><a href="scales-and-zooming.html#cb82-1" aria-hidden="true" tabindex="-1"></a>ggplot(diamonds, aes(<span class="st">&quot;carat&quot;</span>, <span class="st">&quot;price&quot;</span>)) <span class="op">+\</span></span>
<span id="cb82-2"><a href="scales-and-zooming.html#cb82-2" aria-hidden="true" tabindex="-1"></a>geom_bin2d() <span class="op">+\</span></span>
<span id="cb82-3"><a href="scales-and-zooming.html#cb82-3" aria-hidden="true" tabindex="-1"></a>scale_x_log10() <span class="op">+\</span></span>
<span id="cb82-4"><a href="scales-and-zooming.html#cb82-4" aria-hidden="true" tabindex="-1"></a>scale_y_log10()</span></code></pre></div>
<p><img src="plotnine_files/figure-html/unnamed-chunk-88-1.png" width="675" class="md:w-3/4 lg:w-2/3" style="display: block; margin: auto;" /></p>
<p>Another scale that is frequently customised is colour. The default categorical scale picks colours that are evenly spaced around the colour wheel. Useful alternatives are the ColorBrewer scales which have been hand tuned to work better for people with common types of colour blindness. The two plots below look similar, but there is enough difference in the shades of red and green that the dots on the right can be distinguished even by people with red-green colour blindness.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb83-1"><a href="scales-and-zooming.html#cb83-1" aria-hidden="true" tabindex="-1"></a>ggplot(mpg, aes(<span class="st">&quot;displ&quot;</span>, <span class="st">&quot;hwy&quot;</span>)) <span class="op">+\</span></span>
<span id="cb83-2"><a href="scales-and-zooming.html#cb83-2" aria-hidden="true" tabindex="-1"></a>geom_point(aes(color<span class="op">=</span><span class="st">&quot;drv&quot;</span>))</span></code></pre></div>
<p><img src="plotnine_files/figure-html/unnamed-chunk-89-1.png" width="619" class="md:w-3/4 lg:w-2/3" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb84"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb84-1"><a href="scales-and-zooming.html#cb84-1" aria-hidden="true" tabindex="-1"></a>ggplot(mpg, aes(<span class="st">&quot;displ&quot;</span>, <span class="st">&quot;hwy&quot;</span>)) <span class="op">+\</span></span>
<span id="cb84-2"><a href="scales-and-zooming.html#cb84-2" aria-hidden="true" tabindex="-1"></a>geom_point(aes(color<span class="op">=</span><span class="st">&quot;drv&quot;</span>)) <span class="op">+\</span></span>
<span id="cb84-3"><a href="scales-and-zooming.html#cb84-3" aria-hidden="true" tabindex="-1"></a>scale_colour_brewer(<span class="bu">type</span><span class="op">=</span><span class="st">&quot;qual&quot;</span>, palette<span class="op">=</span><span class="st">&quot;Set1&quot;</span>)</span></code></pre></div>
<p><img src="plotnine_files/figure-html/unnamed-chunk-90-1.png" width="619" class="md:w-3/4 lg:w-2/3" style="display: block; margin: auto;" /></p>
<p>Don’t forget simpler techniques. If there are just a few colours, you can add a redundant shape mapping. This will also help ensure your plot is interpretable in black and white.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb85-1"><a href="scales-and-zooming.html#cb85-1" aria-hidden="true" tabindex="-1"></a>ggplot(mpg, aes(<span class="st">&quot;displ&quot;</span>, <span class="st">&quot;hwy&quot;</span>)) <span class="op">+\</span></span>
<span id="cb85-2"><a href="scales-and-zooming.html#cb85-2" aria-hidden="true" tabindex="-1"></a>geom_point(aes(color<span class="op">=</span><span class="st">&quot;drv&quot;</span>, shape<span class="op">=</span><span class="st">&quot;drv&quot;</span>)) <span class="op">+\</span></span>
<span id="cb85-3"><a href="scales-and-zooming.html#cb85-3" aria-hidden="true" tabindex="-1"></a>scale_colour_brewer(<span class="bu">type</span><span class="op">=</span><span class="st">&quot;qual&quot;</span>, palette<span class="op">=</span><span class="st">&quot;Set1&quot;</span>)</span></code></pre></div>
<p><img src="plotnine_files/figure-html/unnamed-chunk-91-1.png" width="619" class="md:w-3/4 lg:w-2/3" style="display: block; margin: auto;" /></p>
<p>The ColorBrewer scales are documented online at <a href="http://colorbrewer2.org/" class="uri">http://colorbrewer2.org/</a> and made available in Python via the <strong>mizani</strong> package, by Hassan Kibirige. The figure below shows the complete list of all palettes. The sequential (top) and diverging (bottom) palettes are particularly useful if your categorical values are ordered, or have a “middle.” This often arises if you’ve used <code>pd.cut()</code> to make a continuous variable into a categorical variable.</p>
<p><img src="images/brewer-1.png" width="400" style="margin-left: 0px;"></p>
<p>When you have a predefined mapping between values and colours, use <code>scale_colour_manual()</code>. For example, if we map presidential party to colour, we want to use the standard mapping of red for Republicans and blue for Democrats:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb86-1"><a href="scales-and-zooming.html#cb86-1" aria-hidden="true" tabindex="-1"></a>presidential[<span class="st">&quot;id&quot;</span>] <span class="op">=</span> <span class="dv">34</span> <span class="op">+</span> presidential.index</span>
<span id="cb86-2"><a href="scales-and-zooming.html#cb86-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-3"><a href="scales-and-zooming.html#cb86-3" aria-hidden="true" tabindex="-1"></a>ggplot(presidential, aes(<span class="st">&quot;start&quot;</span>, <span class="st">&quot;id&quot;</span>, colour<span class="op">=</span><span class="st">&quot;party&quot;</span>)) <span class="op">+\</span></span>
<span id="cb86-4"><a href="scales-and-zooming.html#cb86-4" aria-hidden="true" tabindex="-1"></a>geom_point() <span class="op">+\</span></span>
<span id="cb86-5"><a href="scales-and-zooming.html#cb86-5" aria-hidden="true" tabindex="-1"></a>geom_segment(aes(xend<span class="op">=</span><span class="st">&quot;end&quot;</span>, yend<span class="op">=</span><span class="st">&quot;id&quot;</span>)) <span class="op">+\</span></span>
<span id="cb86-6"><a href="scales-and-zooming.html#cb86-6" aria-hidden="true" tabindex="-1"></a>scale_colour_manual(values<span class="op">=</span>[<span class="st">&quot;red&quot;</span>, <span class="st">&quot;blue&quot;</span>], limits<span class="op">=</span>[<span class="st">&quot;Republican&quot;</span>, <span class="st">&quot;Democratic&quot;</span>])</span></code></pre></div>
<p><img src="plotnine_files/figure-html/unnamed-chunk-92-1.png" width="684" class="md:w-3/4 lg:w-2/3" style="display: block; margin: auto;" /></p>
<p>For continuous colour, you can use the built-in <code>scale_colour_gradient()</code> or <code>scale_fill_gradient()</code>. If you have a diverging scale, you can use <code>scale_colour_gradient2()</code>. That allows you to give, for example, positive and negative values different colours. That’s sometimes also useful if you want to distinguish points above or below the mean.</p>
<p>Note that all colour scales come in two variety: <code>scale_colour_x()</code> and <code>scale_fill_x()</code> for the <code>colour</code> and <code>fill</code> aesthetics respectively (the colour scales are available in both UK and US spellings).</p>
</div>
<div id="exercises-7" class="section level3" number="5.1.4">
<h3><span class="header-section-number">5.1.4</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>Why doesn’t the following code override the default scale?
<code>python     ggplot(df, aes("x", "y")) +\     geom_hex() +\     scale_colour_gradient(low="white", high="red") +\     coord_fixed()</code></p></li>
<li><p>What is the first argument to every scale? How does it compare to <code>labs()</code>?</p></li>
<li><p>Change the display of the presidential terms by:</p>
<ol style="list-style-type: decimal">
<li>Combining the two variants shown above.</li>
<li>Improving the display of the y axis.</li>
<li>Labelling each term with the name of the president.</li>
<li>Adding informative plot labels.</li>
<li>Placing breaks every 4 years (this is trickier than it seems!).</li>
</ol></li>
<li><p>Use <code>override_aes</code> to make the legend on the following plot easier to see.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb87-1"><a href="scales-and-zooming.html#cb87-1" aria-hidden="true" tabindex="-1"></a>ggplot(diamonds, aes(<span class="st">&quot;carat&quot;</span>, <span class="st">&quot;price&quot;</span>)) <span class="op">+\</span></span>
<span id="cb87-2"><a href="scales-and-zooming.html#cb87-2" aria-hidden="true" tabindex="-1"></a>geom_point(aes(colour<span class="op">=</span><span class="st">&quot;cut&quot;</span>), alpha<span class="op">=</span><span class="dv">1</span><span class="op">/</span><span class="dv">20</span>)</span></code></pre></div>
<p><img src="plotnine_files/figure-html/unnamed-chunk-93-1.png" width="702" class="md:w-3/4 lg:w-2/3" style="display: block; margin: auto;" /></p></li>
</ol>
</div>
</div>
<div id="zooming" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Zooming</h2>
<p>There are three ways to control the plot limits:</p>
<ol style="list-style-type: decimal">
<li>Adjusting what data are plotted</li>
<li>Setting the limits in each scale</li>
<li>Setting <code>xlim</code> and <code>ylim</code> in <code>coord_cartesian()</code></li>
</ol>
<p>To zoom in on a region of the plot, it’s generally best to use <code>coord_cartesian()</code>. Compare the following two plots:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb88-1"><a href="scales-and-zooming.html#cb88-1" aria-hidden="true" tabindex="-1"></a>ggplot(mpg, aes(<span class="st">&quot;displ&quot;</span>, <span class="st">&quot;hwy&quot;</span>)) <span class="op">+\</span></span>
<span id="cb88-2"><a href="scales-and-zooming.html#cb88-2" aria-hidden="true" tabindex="-1"></a>geom_point(aes(color<span class="op">=</span><span class="st">&quot;class&quot;</span>)) <span class="op">+\</span></span>
<span id="cb88-3"><a href="scales-and-zooming.html#cb88-3" aria-hidden="true" tabindex="-1"></a>geom_smooth() <span class="op">+\</span></span>
<span id="cb88-4"><a href="scales-and-zooming.html#cb88-4" aria-hidden="true" tabindex="-1"></a>coord_cartesian(xlim<span class="op">=</span>(<span class="dv">5</span>, <span class="dv">7</span>), ylim<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">30</span>))</span></code></pre></div>
<p><img src="plotnine_files/figure-html/unnamed-chunk-94-1.png" width="689" class="md:w-3/4 lg:w-2/3" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb89"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb89-1"><a href="scales-and-zooming.html#cb89-1" aria-hidden="true" tabindex="-1"></a>ggplot(mpg.query(<span class="st">&quot;5 &lt;= displ &lt;= 7 and 10 &lt;= hwy &lt;= 30&quot;</span>), aes(<span class="st">&quot;displ&quot;</span>, <span class="st">&quot;hwy&quot;</span>)) <span class="op">+\</span></span>
<span id="cb89-2"><a href="scales-and-zooming.html#cb89-2" aria-hidden="true" tabindex="-1"></a>geom_point(aes(color<span class="op">=</span><span class="st">&quot;class&quot;</span>)) <span class="op">+\</span></span>
<span id="cb89-3"><a href="scales-and-zooming.html#cb89-3" aria-hidden="true" tabindex="-1"></a>geom_smooth()</span></code></pre></div>
<p><img src="plotnine_files/figure-html/unnamed-chunk-95-1.png" width="689" class="md:w-3/4 lg:w-2/3" style="display: block; margin: auto;" /></p>
<p>You can also set the <code>limits</code> on individual scales. Reducing the limits is basically equivalent to subsetting the data. It is generally more useful if you want <em>expand</em> the limits, for example, to match scales across different plots. For example, if we extract two classes of cars and plot them separately, it’s difficult to compare the plots because all three scales (the x-axis, the y-axis, and the colour aesthetic) have different ranges.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb90-1"><a href="scales-and-zooming.html#cb90-1" aria-hidden="true" tabindex="-1"></a>mpg[<span class="st">&quot;drv&quot;</span>] <span class="op">=</span> mpg[<span class="st">&quot;drv&quot;</span>].astype(<span class="bu">str</span>)</span>
<span id="cb90-2"><a href="scales-and-zooming.html#cb90-2" aria-hidden="true" tabindex="-1"></a>suv <span class="op">=</span> mpg[mpg[<span class="st">&quot;class&quot;</span>] <span class="op">==</span> <span class="st">&quot;suv&quot;</span>]</span>
<span id="cb90-3"><a href="scales-and-zooming.html#cb90-3" aria-hidden="true" tabindex="-1"></a>compact <span class="op">=</span> mpg[mpg[<span class="st">&quot;class&quot;</span>] <span class="op">==</span> <span class="st">&quot;compact&quot;</span>]</span>
<span id="cb90-4"><a href="scales-and-zooming.html#cb90-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-5"><a href="scales-and-zooming.html#cb90-5" aria-hidden="true" tabindex="-1"></a>ggplot(suv, aes(<span class="st">&quot;displ&quot;</span>, <span class="st">&quot;hwy&quot;</span>, colour<span class="op">=</span><span class="st">&quot;drv&quot;</span>)) <span class="op">+\</span></span>
<span id="cb90-6"><a href="scales-and-zooming.html#cb90-6" aria-hidden="true" tabindex="-1"></a>geom_point()</span></code></pre></div>
<p><img src="plotnine_files/figure-html/unnamed-chunk-96-1.png" width="619" class="md:w-3/4 lg:w-2/3" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb91"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb91-1"><a href="scales-and-zooming.html#cb91-1" aria-hidden="true" tabindex="-1"></a>ggplot(compact, aes(<span class="st">&quot;displ&quot;</span>, <span class="st">&quot;hwy&quot;</span>, colour<span class="op">=</span><span class="st">&quot;drv&quot;</span>)) <span class="op">+\</span></span>
<span id="cb91-2"><a href="scales-and-zooming.html#cb91-2" aria-hidden="true" tabindex="-1"></a>geom_point()</span></code></pre></div>
<p><img src="plotnine_files/figure-html/unnamed-chunk-97-1.png" width="619" class="md:w-3/4 lg:w-2/3" style="display: block; margin: auto;" /></p>
<p>One way to overcome this problem is to share scales across multiple plots, training the scales with the <code>limits</code> of the full data.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb92-1"><a href="scales-and-zooming.html#cb92-1" aria-hidden="true" tabindex="-1"></a>x_scale <span class="op">=</span> scale_x_continuous(limits<span class="op">=</span>(mpg.displ.<span class="bu">min</span>(), mpg.displ.<span class="bu">max</span>()))</span>
<span id="cb92-2"><a href="scales-and-zooming.html#cb92-2" aria-hidden="true" tabindex="-1"></a>y_scale <span class="op">=</span> scale_y_continuous(limits<span class="op">=</span>(mpg.hwy.<span class="bu">min</span>(), mpg.hwy.<span class="bu">max</span>()))</span>
<span id="cb92-3"><a href="scales-and-zooming.html#cb92-3" aria-hidden="true" tabindex="-1"></a>col_scale <span class="op">=</span> scale_colour_discrete(limits<span class="op">=</span>mpg.drv.unique())</span>
<span id="cb92-4"><a href="scales-and-zooming.html#cb92-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-5"><a href="scales-and-zooming.html#cb92-5" aria-hidden="true" tabindex="-1"></a>ggplot(suv, aes(<span class="st">&quot;displ&quot;</span>, <span class="st">&quot;hwy&quot;</span>, colour<span class="op">=</span><span class="st">&quot;drv&quot;</span>)) <span class="op">+\</span></span>
<span id="cb92-6"><a href="scales-and-zooming.html#cb92-6" aria-hidden="true" tabindex="-1"></a>geom_point() <span class="op">+\</span></span>
<span id="cb92-7"><a href="scales-and-zooming.html#cb92-7" aria-hidden="true" tabindex="-1"></a>x_scale <span class="op">+\</span></span>
<span id="cb92-8"><a href="scales-and-zooming.html#cb92-8" aria-hidden="true" tabindex="-1"></a>y_scale <span class="op">+\</span></span>
<span id="cb92-9"><a href="scales-and-zooming.html#cb92-9" aria-hidden="true" tabindex="-1"></a>col_scale</span></code></pre></div>
<p><img src="plotnine_files/figure-html/unnamed-chunk-98-1.png" width="619" class="md:w-3/4 lg:w-2/3" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb93"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb93-1"><a href="scales-and-zooming.html#cb93-1" aria-hidden="true" tabindex="-1"></a>ggplot(compact, aes(<span class="st">&quot;displ&quot;</span>, <span class="st">&quot;hwy&quot;</span>, colour<span class="op">=</span><span class="st">&quot;drv&quot;</span>)) <span class="op">+\</span></span>
<span id="cb93-2"><a href="scales-and-zooming.html#cb93-2" aria-hidden="true" tabindex="-1"></a>geom_point() <span class="op">+\</span></span>
<span id="cb93-3"><a href="scales-and-zooming.html#cb93-3" aria-hidden="true" tabindex="-1"></a>x_scale <span class="op">+\</span></span>
<span id="cb93-4"><a href="scales-and-zooming.html#cb93-4" aria-hidden="true" tabindex="-1"></a>y_scale <span class="op">+\</span></span>
<span id="cb93-5"><a href="scales-and-zooming.html#cb93-5" aria-hidden="true" tabindex="-1"></a>col_scale</span></code></pre></div>
<p><img src="plotnine_files/figure-html/unnamed-chunk-99-1.png" width="619" class="md:w-3/4 lg:w-2/3" style="display: block; margin: auto;" /></p>
<p>In this particular case, you could have simply used faceting, but this technique is useful more generally, if for instance, you want spread plots over multiple pages of a report.</p>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="8">
<li id="fn8"><p>In ggplot2 you can write <code>labels = NULL</code> so you don’t need a helper function.<a href="scales-and-zooming.html#fnref8" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="transformations.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="graphics-for-communication.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["plotnine.pdf", "plotnine.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
