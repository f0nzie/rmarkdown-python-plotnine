<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Data Visualization with PlotNine</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Data Visualization with PlotNine" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Data Visualization with PlotNine" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Jeroen Janssens" />


<meta name="date" content="2020-11-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  

<link rel="next" href="data-visualisation-with-plotnine.html"/>
<script src="libs/header-attrs-2.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Visualization with PlotNine</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface</a></li>
<li class="chapter" data-level="2" data-path="data-visualisation-with-plotnine.html"><a href="data-visualisation-with-plotnine.html"><i class="fa fa-check"></i><b>2</b> Data visualisation with <code>plotnine</code></a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-visualisation-with-plotnine.html"><a href="data-visualisation-with-plotnine.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="data-visualisation-with-plotnine.html"><a href="data-visualisation-with-plotnine.html#prerequisites"><i class="fa fa-check"></i><b>2.1.1</b> Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-visualisation-with-plotnine.html"><a href="data-visualisation-with-plotnine.html#first-steps"><i class="fa fa-check"></i><b>2.2</b> First steps</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="data-visualisation-with-plotnine.html"><a href="data-visualisation-with-plotnine.html#the-mpg-dataframe"><i class="fa fa-check"></i><b>2.2.1</b> The <code>mpg</code> DataFrame</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-visualisation-with-plotnine.html"><a href="data-visualisation-with-plotnine.html#creating-a-ggplot"><i class="fa fa-check"></i><b>2.2.2</b> Creating a ggplot</a></li>
<li class="chapter" data-level="2.2.3" data-path="data-visualisation-with-plotnine.html"><a href="data-visualisation-with-plotnine.html#a-graphing-template"><i class="fa fa-check"></i><b>2.2.3</b> A graphing template</a></li>
<li class="chapter" data-level="2.2.4" data-path="data-visualisation-with-plotnine.html"><a href="data-visualisation-with-plotnine.html#exercises"><i class="fa fa-check"></i><b>2.2.4</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="aesthetics-and-geometry.html"><a href="aesthetics-and-geometry.html"><i class="fa fa-check"></i><b>3</b> Aesthetics and Geometry</a>
<ul>
<li class="chapter" data-level="3.1" data-path="aesthetics-and-geometry.html"><a href="aesthetics-and-geometry.html#aesthetic-mappings"><i class="fa fa-check"></i><b>3.1</b> Aesthetic mappings</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="aesthetics-and-geometry.html"><a href="aesthetics-and-geometry.html#exercises-1"><i class="fa fa-check"></i><b>3.1.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="aesthetics-and-geometry.html"><a href="aesthetics-and-geometry.html#common-problems"><i class="fa fa-check"></i><b>3.2</b> Common problems</a></li>
<li class="chapter" data-level="3.3" data-path="aesthetics-and-geometry.html"><a href="aesthetics-and-geometry.html#facets"><i class="fa fa-check"></i><b>3.3</b> Facets</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="aesthetics-and-geometry.html"><a href="aesthetics-and-geometry.html#exercises-2"><i class="fa fa-check"></i><b>3.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="aesthetics-and-geometry.html"><a href="aesthetics-and-geometry.html#geometric-objects"><i class="fa fa-check"></i><b>3.4</b> Geometric objects</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="aesthetics-and-geometry.html"><a href="aesthetics-and-geometry.html#exercises-3"><i class="fa fa-check"></i><b>3.4.1</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="transformations.html"><a href="transformations.html"><i class="fa fa-check"></i><b>4</b> Transformations</a>
<ul>
<li class="chapter" data-level="4.1" data-path="transformations.html"><a href="transformations.html#statistical-transformations"><i class="fa fa-check"></i><b>4.1</b> Statistical transformations</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="transformations.html"><a href="transformations.html#exercises-4"><i class="fa fa-check"></i><b>4.1.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="transformations.html"><a href="transformations.html#position-adjustments"><i class="fa fa-check"></i><b>4.2</b> Position adjustments</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="transformations.html"><a href="transformations.html#exercises-5"><i class="fa fa-check"></i><b>4.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="transformations.html"><a href="transformations.html#coordinate-systems"><i class="fa fa-check"></i><b>4.3</b> Coordinate systems</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="transformations.html"><a href="transformations.html#exercises-6"><i class="fa fa-check"></i><b>4.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="transformations.html"><a href="transformations.html#the-layered-grammar-of-graphics"><i class="fa fa-check"></i><b>4.4</b> The layered grammar of graphics</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="scales-and-zooming.html"><a href="scales-and-zooming.html"><i class="fa fa-check"></i><b>5</b> Scales and Zooming</a>
<ul>
<li class="chapter" data-level="5.1" data-path="scales-and-zooming.html"><a href="scales-and-zooming.html#scales"><i class="fa fa-check"></i><b>5.1</b> Scales</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="scales-and-zooming.html"><a href="scales-and-zooming.html#axis-ticks-and-legend-keys"><i class="fa fa-check"></i><b>5.1.1</b> Axis ticks and legend keys</a></li>
<li class="chapter" data-level="5.1.2" data-path="scales-and-zooming.html"><a href="scales-and-zooming.html#legend-layout"><i class="fa fa-check"></i><b>5.1.2</b> Legend layout</a></li>
<li class="chapter" data-level="5.1.3" data-path="scales-and-zooming.html"><a href="scales-and-zooming.html#replacing-a-scale"><i class="fa fa-check"></i><b>5.1.3</b> Replacing a scale</a></li>
<li class="chapter" data-level="5.1.4" data-path="scales-and-zooming.html"><a href="scales-and-zooming.html#exercises-7"><i class="fa fa-check"></i><b>5.1.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="scales-and-zooming.html"><a href="scales-and-zooming.html#zooming"><i class="fa fa-check"></i><b>5.2</b> Zooming</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html"><i class="fa fa-check"></i><b>6</b> Graphics for communication</a>
<ul>
<li class="chapter" data-level="6.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#introduction-1"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#labels"><i class="fa fa-check"></i><b>6.2</b> Labels</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercises-8"><i class="fa fa-check"></i><b>6.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#annotations"><i class="fa fa-check"></i><b>6.3</b> Annotations</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercises-9"><i class="fa fa-check"></i><b>6.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#themes"><i class="fa fa-check"></i><b>6.4</b> Themes</a></li>
<li class="chapter" data-level="6.5" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#saving-your-plots"><i class="fa fa-check"></i><b>6.5</b> Saving your plots</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#figure-sizing"><i class="fa fa-check"></i><b>6.5.1</b> Figure sizing</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://datascienceworkshops.com/blog/plotnine-grammar-of-graphics-for-python/" target="blank">Original article by Jeroen Janssens</a></li>
<li><a href="https://github.com/f0nzie/rmarkdown-python-plotnine/" target="blank">This book repo by Alfonso R. Reyes</a></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Visualization with PlotNine</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="header">
<h1 class="title">Data Visualization with PlotNine</h1>
<p class="author"><em>Jeroen Janssens</em></p>
<p class="date"><em>2020-11-06</em></p>
</div>
<div id="preface" class="section level1" number="1">
<h1><span class="header-section-number">Ch. 1</span> Preface</h1>
<p><a href="https://github.com/has2k1/plotnine">plotnine</a> is a data visualisation package for Python based on the grammar of graphics, created by Hassan Kibirige.
Its API is similar to <a href="https://ggplot2.tidyverse.org/">ggplot2</a>, a widely successful R package by <a href="https://ggplot2.tidyverse.org/authors.html">Hadley Wickham and others</a>.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
<p>I’m a staunch proponent of ggplot2.
The underlying grammar of graphics is accompanied by a consistent API that allows you to quickly and iteratively create different types of beautiful data visualisations while rarely having to consult the documentation.
A welcoming set of properties when doing exploratory data analysis.</p>
<p>I must admit that I haven’t tried every data visualisation package there is for Python, but when it comes to the most popular ones, I personally find them either convenient but limited (<a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/visualization.html">pandas</a>), flexible but complicated (<a href="https://matplotlib.org/">matplotlib</a>), or beautiful but inconsistent (<a href="https://seaborn.pydata.org/">seaborn</a>).
Your mileage may vary.
plotnine, on the other hand, shows a lot of promise.
I estimate it currently has a 95% coverage of ggplot2’s functionality, and it’s still actively being developed.
All in all, as someone who uses both R and Python, I’m very pleased to be able to transfer my ggplot2 knowledge to the Python ecosystem.</p>
<p>I figured that plotnine could use a good tutorial so that perhaps more Pythonistas would give this package a shot.
Instead of writing one from scratch, I turned to the, in my opinion, best free tutorial for ggplot2: <a href="https://r4ds.had.co.nz/">R for Data Science</a> by Hadley Wickham and Garrett Grolemund, published by O’Reilly Media in 2016.</p>
<p><img src="images/cover.png" width="250" class="p-4 w-1/2 md:w-1/3 lg:w-1/4" /></p>
<p>All I had to do was translate<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> the visualization chapters (chapter 3 and 28) from R and ggplot2 to Python and plotnine.
I would like to thank Hadley, Garrett, and O’Reilly Media, for granting me permission to do so.
Translating an existing text is quicker than writing a new one, and has the benefit that it becomes possible to compare both the syntax and coverage of plotnine to ggplot2.</p>
<p>However, while quicker, translating is not always straightforward.
I have tried to change as little as possible to the original text while making sure that the text and the code are still in sync.
In case any errors or falsehoods have been introduced due to translation, then I’m the one to blame.
For example, to the best of my knowledge, neither authors have made any claims about plotnine.
If you find such an error and think it is fixable, then it would be greatly appreciated if you’d let me know by <a href="https://github.com/datascienceworkshops/r4ds-python-plotnine/issues">creating an issue on Github</a>.
Thank you.
The section numbers in this tutorial link back to the corresponding section of the original text, in case you want to compare them.<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a> Only this preface and the few footnotes scattered among the text are entirely mine.</p>
<p>This tutorial is also available as a <a href="https://github.com/datascienceworkshops/r4ds-python-plotnine/blob/master/output/r4ds-python-plotnine.ipynb">Jupyter notebook</a> and an <a href="https://github.com/datascienceworkshops/r4ds-python-plotnine/blob/master/output/r4ds-python-plotnine.Rmd">R notebook</a> in case you want to follow along.
If you clone the <a href="https://github.com/datascienceworkshops/r4ds-python-plotnine">Github repository</a> then you can find the notebooks in the <code>output</code> directory.
The <a href="https://github.com/datascienceworkshops/r4ds-python-plotnine/blob/master/README.md">README</a> contains instructions on how to run the notebooks.
The Jupyter notebook is also available on <a href="https://mybinder.org/v2/gh/datascienceworkshops/r4ds-python-plotnine/master?filepath=output%2Fr4ds-python-plotnine.ipynb">Binder</a>, but keep in mind that the interactive version may take a while to launch.</p>
<p>Without further ado, let’s start learning about plotnine!</p>
<p>Cheers,</p>
<p>Jeroen</p>

</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>There have been other attempts at porting ggplot2 to Python, such as <a href="https://github.com/yhat/ggpy">ggpy</a>, but as far as I know, these are no longer maintained.<a href="index.html#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>If you ever need to translate ggplot2 to plotnine yourself, check out my <a href="/blog/heuristics-for-translating-ggplot2-to-plotnine">follow-up post containing heuristics</a> for doing so.<a href="index.html#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>It’s important to note that this tutorial is not meant to compare Python and R.
The never-ending flame wars between these two languages are boring and unproductive.<a href="index.html#fnref3" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>

<a href="data-visualisation-with-plotnine.html" class="navigation navigation-next navigation-unique" aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["plotnine.pdf", "plotnine.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
